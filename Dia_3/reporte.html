<!doctype html>
<html lang="es">
<head>
  <title>Crear Reporte - Lechuza Soluciones</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <center>
    <section class="reporte">
      <h2>Crear Reporte</h2>
      <form>
        <label>Nombre:</label>
        <input type="text" placeholder="Tu nombre" required><br><br>
        
        <label>Descripción del problema:</label><br>
        <textarea placeholder="Escribe tu problema aquí..." rows="4" required></textarea><br><br>
        
        <button type="submit" class="btn primary">Enviar</button>
      </form>
      <br>
      <a href="index.html" class="btn">Volver al menú</a>
    </section>
  </center>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getFirestore, collection, addDoc } 
    from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD7tjDAYzGDiKECae-NVdjveLApsGpLGMM",
    authDomain: "lechuzaapp.firebaseapp.com",
    projectId: "lechuzaapp",
    storageBucket: "lechuzaapp.firebasestorage.app",
    messagingSenderId: "652647828795",
    appId: "1:652647828795:web:5aa6f57801e6987234bb1e"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Capturar el formulario
  const form = document.querySelector("form");
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const nombre = form.querySelector("input").value;
    const descripcion = form.querySelector("textarea").value;

    try {
      await addDoc(collection(db, "reportes"), {
        nombre,
        descripcion,
        fecha: new Date().toISOString()
      });
      alert("✅ Reporte guardado en Firebase");
      form.reset();
    } catch (error) {
      console.error("Error al guardar reporte:", error);
    }
  });
</script>

</body>
</html>
